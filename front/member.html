<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <link href="./member.css" rel="stylesheet">
    <title>Orca_Member</title>
    <style>
        .active {
            display: block;
        }

        .nonactive {
            display: none;
        }

        .card-title {
            font-weight: 700;
        }

        .card-text {
            font-size: 0.8rem;
        }

        .sets-unit,
        .reps-unit {
            font-size: 0.8rem;
        }

        .type-img {
            width: 32px;
            height: 32px;
        }

        .reps,
        .sets {
            font-weight: 500;
        }

        .form-label,
        legend {
            font-size: 1.2rem;
        }

        .form-check-label {
            font-weight: 500;
        }
    </style>
</head>

<body>
    <div id="header-container" class="header-class container-fluid">
        <img src="../orcalogo.png" height="100" style="margin-left: 50px">
        <h1 id="welcome-h1"></h1>
        <div class="header-button-container">
            <button type="button" class="btn btn-light">All Workouts</button>
            <button type="button" class="btn btn-light">My Workouts</button>
            <button type="button" class="btn btn-danger">Logout</button>
        </div>
    </div>

    <main class="container-md p-4">
        <h3>
            My Workout Program
        </h3>
        <div class="message-from-instructor nonactive">
            <p>
                Your workouot program curated by your instructor:
                <span>[insructor's name]</span>
            </p>
            <h5>
                Instructor notes:
            </h5>
            <p>
            </p>
        </div>

        <div class="workout">
            <div class="workout-card">
                <!-- workout cards go here... -->
            </div>

            <div class="workout-form-div">
                <div class="workout-form-message">
                    <!-- If workout form hasn't been submitted, messages go here. -->
                </div>
                <form class="workout-form nonactive">
                    <fieldset>
                        <legend>1. Which difficulty level would you like to choose?</legend>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" id="beginner" name="level" value="beginner"
                                checked />
                            <label class="form-check-label" for="beginner">Beginner</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" id="intermidiate" name="level"
                                value="intermidiate" />
                            <label class="form-check-label" for="intermidiate">Intermidiate</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" id="advanced" name="level" value="advanced" />
                            <label class="form-check-label" for="advanced">Advanced</label>
                        </div>
                    </fieldset>

                    <div>
                        <label class="form-label" for="days">2. How many days a week would you like to workout?</label>
                        <select class="form-select" name="days" id="days">
                            <option value="">--Please choose an option--</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                        </select>
                    </div>

                    <div>
                        <label class="form-label" for="instructors">3. Which instructors would you like to work
                            with?</label>
                        <select class="form-select" name="instructors" id="instructors">
                            <option value="">--Please choose an option--</option>
                            <!-- <option value="Arnold">Arnold</option> -->
                        </select>
                    </div>

                    <fieldset>
                        <legend>4. What is your goal with this program?</legend>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" id="burn fat" name="goal" value="burn fat"
                                checked />
                            <label class="form-check-label" for="burn fat">Burn Fat</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" id="build muscle" name="goal"
                                value="build muscle" />
                            <label class="form-check-label" for="build muscle">Build Muscle</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" id="gain strength" name="goal"
                                value="gain strength" />
                            <label class="form-check-label" for="gain strength">Gain Strength</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" id="stay active" name="goal"
                                value="stay active" />
                            <label class="form-check-label" for="stay active">Stay Active</label>
                        </div>
                    </fieldset>

                    <div>
                        <label class="form-label" for="note">5. Tell us your note:</label>
                        <textarea class="form-control" id="note" name="note"></textarea>
                    </div>

                    <button class="btn btn-success align-self-center" type="submit">Send</button>
                </form>
            </div>
        </div>
    </main>



    <script type="module">
        import XMLReq from "./js/XMLReq.js"
        const memberPhp = "http://localhost/php/FitnessCMS-FinalProject/members.php";
        let xmlReq = new XMLReq(memberPhp);
        let loadData, memberInfo, Instructors;
        let myWorkoutData = [];
        let allWorkoutData = [];
        let workoutDiv = document.querySelector(".workout");
        let workoutCardDiv = document.querySelector(".workout-card");
        let workoutFormDiv = document.querySelector(".workout-form-div");
        let requestForm = document.querySelector(".workout-form");
        // Add event listener to form request.
        requestForm.addEventListener("submit", (e) => {
            e.preventDefault();
            const sid = sessionStorage.getItem("sid");
            const mid = sessionStorage.getItem("mid");
            let reqData = new FormData(e.target);
            reqData.append("sid", sid);
            reqData.append("mid", mid);
            // After submitting form of workout request.
            reqData.append("status", "pending")
            reqData.append("mode", "form")
            xmlReq.Post(reqData).then(
                (data) => {
                    console.log(data);
                },
                (rej) => {
                    console.log(rej);
                }
            )
            location.reload();
        })


        function load() {
            const sid = sessionStorage.getItem("sid");
            const mid = sessionStorage.getItem("mid");
            let reqData = new FormData();
            reqData.append("sid", sid);
            reqData.append("mid", mid);
            reqData.append("mode", "load")
            xmlReq.Post(reqData).then(
                (data) => {
                    loadData = JSON.parse(data);
                    console.log(loadData);
                    memberInfo = loadData[0];
                    Instructors = loadData[1];
                    allWorkoutData = loadData[2];
                    // Welcome message
                    let h1 = document.querySelector("#welcome-h1");
                    h1.textContent = "Welcome " + memberInfo.fname + "!";
                    workoutHandler();
                },
                (rej) => {
                    console.log(rej);
                }
            )
        }
        load();

    </script>
</body>



</html>